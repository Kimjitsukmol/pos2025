<!doctype html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>POS — ร้านขายของชำ</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>
<div class="app">
<header>
  <h1 id="app-title" title="คลิกเพื่อดูยอดขายวันนี้/เมื่อวาน/30 วัน">ร้านเจ้พิน ขอบคุณที่มาอุดหนุน</h1>
  <!-- ปุ่มตะกร้าพักบิลหลายใบ -->
<button id="held-bills-button" class="cart-btn" title="บิลที่พักไว้ (คลิกเพื่อเรียกบิล)">
  <!-- ไอคอนตะกร้า (SVG) -->
  <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true">
    <path d="M7 4h-2l-1 2h2l3.6 7.59-1.35 2.45A2 2 0 0 0 10 19h9v-2h-9l1.1-2H17a2 2 0 0 0 1.8-1.1l3.58-6.49A1 1 0 0 0 21.5 5H7.42l-.7-1.4A1 1 0 0 0 6 3H3v2h2l3 6-1.1 2H5v2h2" fill="currentColor"/>
  </svg>
  <span id="held-count-badge" class="badge" aria-label="จำนวนบิลที่พักไว้">0</span>
</button>
<div id="clock" class="clock" aria-live="polite" title="เวลาปัจจุบัน"></div>

  <div class="scan">
    <input id="scan-input" type="text" placeholder="สแกน/รหัสสินค้า " autofocus />
    <button id="clear-input">ล้าง</button>
  </div>
</header>

<main class="grid">
  <section class="left">
    <table class="cart" id="cart-table">
      <thead>
        <tr>
          <th>รหัส</th>
          <th>ชื่อสินค้า</th>
          <th class="num">ราคา</th>
          <th class="num">จำนวน</th>
          <th class="num">รวม</th>
          <th></th>
        </tr>
      </thead>
      <tbody id="cart-body"></tbody>

      <!-- QR ชำระเงิน (เริ่มซ่อน) -->

      <div id="qr-pay-wrap" class="hidden">
        <div class="qr-box">
          <img id="qr-img" alt="QR ชำระเงิน" />
          <div class="qr-amount">
            <small id="qr-count" class="qr-count">(0 รายการ)</small>
            <div>ยอดชำระ: <span id="qr-amt">0</span> บาท</div>
          </div>


        </div>
      </div>

    </table>
  </section>

  <section class="right">
    <div class="panel">
      <div class="totals">
  <div id="item-count" class="item-count">0 รายการ</div>
  <div>ยอดรวม: <span id="subtotal" class="big-total"></span></div>
</div>


<div class="change">เงินทอน: <span id="change" class="big-total"></span></div>

      <div class="row pay">
        <input id="cash" placeholder="รับเงิน" type="number" min="0" />
        <!-- <button id="calc-change">คำนวณทอน</button> -->
      </div>
      <!-- <div class="change">เงินทอน: <span id="change">0</span></div> -->
      <div class="actions">
        <button id="hold-bill">พักบิล</button>
        <!-- <button id="resume-bill">ดึงบิล</button> -->


        <!-- <button id="print">พิมพ์ใบเสร็จ</button> -->
        <button id="clear-cart" class="danger">ล้างตะกร้า</button>
        <!-- ในกลุ่มปุ่ม actions เดิม ให้เพิ่มปุ่มนี้เข้าไป -->
        <button id="view-receipts">ดูใบเสร็จ</button>

      </div>
      <div class="hint">
        คีย์ลัด: Enter = เพิ่มรายการ, Ctrl+Backspace = ล้างตะกร้า, Ctrl+P = พิมพ์, Ctrl+H = พักบิล, Ctrl+R = ดึงบิล
      </div>
    </div>
  </section>
</main>

<footer>
  <small>เชื่อม Google Sheet | พิมพ์ตัวเลข 1–9999 = ใส่ราคาทันที + พูดราคา</small>
</footer>
</div>

<div id="sales-popup" class="sales-popup hidden"></div>

<script src="app.js?v=2025-08-26-01"></script>

</body>
</html>
